{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="Utf-8">

    <link rel="stylesheet" type="text/css" href="{% static 'EditTimeplan/styleAdmin1.css' %}">
  </head>
  <body>
      <header>
          <nav>
              <div class="logo">
                <a class="navbar-logo" href="{% url 'accueil' %}">Skedease</a>
              </div>
          </nav>
      </header>
      <main>
        <section class="cal">
          <div class="add-but">
            <button> 
              <span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg> Créer
              </span>
            </button>

            <form method="POST" action="{% url 'copier_table' %}" style="display: inline-block; position: relative; left : 90%">
              {% csrf_token %}
              <button> 
                <span>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"></path><path fill="currentColor" d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"></path></svg>Publier
                </span>
              </button>
            </form>
          </div>

          
            
          
          <form id="close" class="form_main" action="{% url 'save_cours' %}" method="post">
            {% csrf_token %} 
            <div class="form-nav">
                <label for="close-checkbox" class="close">
                  <div class="line one"></div>
                  <div class="line two"></div>
                </label>
                <input type="checkbox" id="close-checkbox" class="close-checkbox">
            </div>
            <p class="heading">Nouveau cours</p>
            <div class = "inputContainer">
              <p>Date du cours</p>
              <input type="date" name = "date" class = inputField required>
            </div>
            <div class="inputContainer">
                <input type="time"  name="start-time" class="inputField"  required>
                <input type="time"  name="end-time" class="inputField"  required>
            </div>
            <div class="day">
              <datalist id="day-list">
                <option value="Lundi"></option>
                <option value="Mardi"></option>
                <option value="Mercredi"></option>
                <option value="Jeudi"></option>
                <option value="Vendredi"></option>
                <option value="Samedi"></option>
              </datalist>
              <input type="text" placeholder="Jour" name="day" class="inputField" list="day-list" required>
          </div>
            <div class="mat">
                <input type="text" placeholder="Matière" name="matiere" class="inputField autocomplete"  required autofocus>

            </div>
          <div class="prof">    <!--Je veux afficher automatiquement le nom du professeur.Je le ferais plustard -->
                <input type="text" placeholder="Nom du professeur"  name="professeur" class="inputField" required>
            </div>
          <div class="groupe">
              <input type="text" placeholder="Groupe" name="groupe" class="inputField autocomplete" list="groupe-list"  required autofocus>
              <datalist id="groupe-list">
                <option value="Groupe 1"></option>
                <option value="Groupe 2"></option>
                <option value="Groupe 1 & Groupe 2"></option>
              </datalist>

          </div>
            <div class="salle">
              <input type="text" placeholder="Salle" name="salle" class="inputField" required>
          </div>
            <div class="form-sub">
                <button >Save</button>
                <!-- Apparement ce botton joue le meme role que submit meme lorsqu'on precise pas le type submit -->
            </div>
          </form>
                  
          <script>
            const createButton = document.querySelector('.add-but button');
            const formMain = document.getElementById('close');
            const closeCheckbox = document.getElementById('close-checkbox');

            createButton.addEventListener('click', function() {
              if (formMain.style.display === 'flex') {
                formMain.style.display = 'none';
              } else {
                formMain.style.display = 'flex';
              }
            });

            closeCheckbox.addEventListener('change', function() {
              if (this.checked) {
                formMain.style.display = 'none';
              } else {
                formMain.style.display = 'flex';
              }
            });
            // //fonction pour mettre le curseur à la fin du champs email
            // function setCursorToEnd() {
            //   var emailField = document.getElementById('email');
            //   var emailValue = emailField.value;
            //   emailField.value = '';
            //   emailField.value = emailValue;
            //   emailField.focus();
            // }

            // //Exécuter le fonction lorsqe le document est prêt
            // document.addEventListener('DOMContentLoaded', function() {
            //   {% if error_message %}
            //       setCursorToEnd();
            //   {% endif %}
            // });

          </script>
      
      
      
       


            

          <!-- Formulaire de modification -->
            <hr>
              <a href="#" class="show-form-link"></a>
                <div id="conteneur-formulaire" style="display: none;">

                  <form id="modify" class="form_modify" action="{% url 'modify_url' %}" method="post">
                    {% csrf_token %}
                    <div class="form-modify">
                      <label for="close-checkbox-modify" class="close-modify">
                        <div class="line one"></div>
                        <div class="line two"></div>
                      </label>
                      <input type="checkbox" id="close-checkbox-modify" class="close-checkbox-modify">
                    </div>
                    <p class="heading">Modifier cours</p>
                    <div class = "inputContainer">
                      <p>Date du cours</p>
                      <input type="date" name = "date" class = inputField required>
                    </div>
                    <div class="inputContainer">
                      <input type="time" id="Modif_start-time" name="start-time" class="inputField"  required>
                      <input type="time" id="Modif_end-time" name="end-time" class="inputField"  required>
                  </div>
                  <div class="day">
                    <datalist id="day-list">
                      <option value="Lundi"></option>
                      <option value="Mardi"></option>
                      <option value="Mercredi"></option>
                      <option value="Jeudi"></option>
                      <option value="Vendredidi"></option>
                      <option value="Samedi"></option>
                    </datalist>
                    <input type="text" id="Modif_day" placeholder="Jour" name="day" class="inputField" list="day-list" required>
                </div>
                  <div class="mat">
                      <input type="text" id="Modif_matiere" placeholder="Matière" name="matiere" class="inputField autocomplete" id="matiere"  required autofocus>
      
                  </div>
                <div class="prof">  
                      <input type="text" id="Modif_teacher" placeholder="Nom du professeur"  name="professeur" class="inputField" required>
                  </div>
                <div class="groupe">
                    <input type="text" id="Modif_groupe" placeholder="Groupe" name="groupe" class="inputField autocomplete" list="groupe-list"  required autofocus>
                    <datalist id="groupe-list">
                      <option value="Groupe1"></option>
                      <option value="Groupe2"></option>
                      <option value="Groupe1 & Groupe 2"></option>
                    </datalist>
      
                </div>
                  <div class="salle">
                    <input type="text" id="Modif_salle" placeholder="Salle" name="salle" class="inputField" required>
                </div>
                <div class="No_visible" >
                  <input type="text" id="Modif_cours_id" placeholder="id" name="id_cours_modif" class="inputField" required>
              </div>
                  <div class="form-sub">
                      <button id="button">Save</button>
                  </div>
                </form>
                </div>
              </section>
              

            <table>
              <tr class="week-days">
                <th>Lundi</th>
                <th>Mardi</th>
                <th>Mercredi</th>
                <th>Jeudi</th>
                <th>Vendredi</th>
                <th>Samedi</th>
              </tr>
              <tr class="tab-cont">
                <td>
                  {% for cours in CoursProgrammer %}
                  {% if cours.jour == "Lundi" %}
                   
                      <div class="cours">
                        <!-- Afficher les informations du cours --> 
                        <p class = "date_du_cours">{{cours.Date}}</p>
                        <p class="jour No_visible">{{ cours.jour }}</p>
                        <p class="id_cours No_visible">{{ cours.id }}</p>
                        <!-- Il ne doivent pas etre visibles.Mais leurs presence me permet de récupérer
                        certaines precisions telles que l'id pour modifier le cours dans la base de données et afficher le jour dans le 
                      formulaire de modification 'G.Ronald"-->
                      
                        <p class="groupe-color"> <span class="groupe">{{ cours.groupe }}</span> <span class="salle">{{ cours.salle }}</span></p>
                        <p > <span class="heure_debut">{{ cours.heure_debut }}</span>/<span class="heure_fin">{{ cours.heure_fin }}</span> <span class="matiere">{{cours.matiere}}</span></p>
                        <p class="teacher">{{ cours.teacher }}</p>

                        <button class="edit-button modifier_btn" onclick="editRow(this)"> <a href="" class="show-form-link">Modifier</a></button>
                        <button class="delete_btn"><a href="{% url 'DeleteCours' cours.id %}">Suprimer</a></button>

                        
                      </div>
                   
                  {% endif %}
                {% empty %}
                  <p>Aucun cours programmé</p>
                {% endfor %}
                </td>
                <td class="tdcolor">
                  {% for cours in CoursProgrammer %}
                  {% if cours.jour == "Mardi" %}
                   
                      <div class="cours">
                        <!-- Afficher les informations du cours --> 
                        <p class = "date_du_cours">{{cours.Date}}</p>
                        <p class="jour No_visible">{{ cours.jour }}</p>
                        <p class="id_cours No_visible">{{ cours.id }}</p>
                        <!-- Il ne doivent pas etre visible.Mais leurs precense me permet de recuperer
                        certain precision tel que l'id pour modifier le cours dans la base de donné et afficher le jours dans le 
                      formulaire de modification 'G.Ronald"-->
                      
                        <p class="groupe-color"> <span class="groupe">{{ cours.groupe }}</span> <span class="salle">{{ cours.salle }}</span></p>
                        <p > <span class="heure_debut">{{ cours.heure_debut }}</span>/<span class="heure_fin">{{ cours.heure_fin }}</span> <span class="matiere">{{cours.matiere}}</span></p>
                        <p class="teacher">{{ cours.teacher }}</p>
                        <button class="edit-button modifier_btn" onclick="editRow(this)"> <a href="" class="show-form-link">Modifier </a></button>
                        <button class="delete_btn"><a href="{% url 'DeleteCours' cours.id %}">Suprimer</a></button>
                        
                      </div>
                   
                  {% endif %}
                {% empty %}
                  <p>Aucun cours programmé</p>
                {% endfor %}
                </td>
                <td>
                  {% for cours in CoursProgrammer %}
                  {% if cours.jour == "Mercredi" %}
                   
                      <div class="cours">
                        <!-- Afficher les informations du cours -->
                        <p class = "date_du_cours">{{cours.Date}}</p>
                        <p class="jour No_visible">{{ cours.jour }}</p>
                        <p class="id_cours No_visible">{{ cours.id }}</p>
                        <!-- Il ne doivent pas etre visible.Mais leurs precense me permet de recuperer
                        certain precision tel que l'id pour modifier le cours dans la base de donné et afficher le jours dans le 
                      formulaire de modification 'G.Ronald"-->
                      
                        <p class="groupe-color"> <span class="groupe">{{ cours.groupe }}</span> <span class="salle">{{ cours.salle }}</span></p>
                        <p > <span class="heure_debut">{{ cours.heure_debut }}</span>/<span class="heure_fin">{{ cours.heure_fin }}</span> <span class="matiere">{{cours.matiere}}</span></p>
                        <p class="teacher">{{ cours.teacher }}</p>
                        <button class="edit-button modifier_btn" onclick="editRow(this)"> <a href="" class="show-form-link">Modifier </a></button>
                        <button class="delete_btn"><a href="{% url 'DeleteCours' cours.id %}">Suprimer</a></button>
                        
                      </div>
                   
                  {% endif %}
                {% empty %}
                  <p>Aucun cours programmé</p>
                {% endfor %}
                </td>
                <td class="tdcolor">
                  {% for cours in CoursProgrammer %}
                  {% if cours.jour == "Jeudi" %}
                   
                      <div class="cours">
                        <!-- Afficher les informations du cours --> 
                        <p class = "date_du_cours">{{cours.Date}}</p>
                        <p class="jour No_visible">{{ cours.jour }}</p>
                        <p class="id_cours No_visible">{{ cours.id }}</p>
                        <!-- Il ne doivent pas etre visible.Mais leurs precense me permet de recuperer
                        certain precision tel que l'id pour modifier le cours dans la base de donné et afficher le jours dans le 
                      formulaire de modification 'G.Ronald"-->
                      
                        <p class="groupe-color"> <span class="groupe">{{ cours.groupe }}</span> <span class="salle">{{ cours.salle }}</span></p>
                        <p > <span class="heure_debut">{{ cours.heure_debut }}</span>/<span class="heure_fin">{{ cours.heure_fin }}</span> <span class="matiere">{{cours.matiere}}</span></p>
                        <p class="teacher">{{ cours.teacher }}</p>
                        <button class="edit-button modifier_btn" onclick="editRow(this)"> <a href="" class="show-form-link">Modifier </a></button>
                        <button class="delete_btn"><a href="{% url 'DeleteCours' cours.id %}">Suprimer</a></button>
                        
                      </div>
                   
                  {% endif %}
                {% empty %}
                  <p>Aucun cours programmé</p>
                {% endfor %}
                </td>

                <td>
                  {% for cours in CoursProgrammer %}
                  {% if cours.jour == "Vendredi" %}
                   
                      <div class="cours">
                        <!-- Afficher les informations du cours -->
                        <p class = "date_du_cours">{{cours.Date}}</p>
                        <p class="jour No_visible">{{ cours.jour }}</p>
                        <p class="id_cours No_visible">{{ cours.id }}</p>
                        <!-- Il ne doivent pas etre visible.Mais leurs precense me permet de recuperer
                        certain precision tel que l'id pour modifier le cours dans la base de donné et afficher le jours dans le 
                      formulaire de modification 'G.Ronald"-->
                      
                        <p class="groupe-color"> <span class="groupe">{{ cours.groupe }}</span> <span class="salle">{{ cours.salle }}</span></p>
                        <p > <span class="heure_debut">{{ cours.heure_debut }}</span>/<span class="heure_fin">{{ cours.heure_fin }}</span> <span class="matiere">{{cours.matiere}}</span></p>
                        <p class="teacher">{{ cours.teacher }}</p>
                        <button class="edit-button modifier_btn" onclick="editRow(this)"> <a href="" class="show-form-link">Modifier </a></button>
                        <button class="delete_btn"><a href="{% url 'DeleteCours' cours.id %}">Suprimer</a></button>
                        
                      </div>
                   
                  {% endif %}
                {% empty %}
                  <p>Aucun cours programmé</p>
                {% endfor %}
            </td>
            <td class="tdcolor">
              {% for cours in CoursProgrammer %}
              {% if cours.jour == "Samedi" %}
               
                  <div class="cours">
                    <!-- Afficher les informations du cours -->
                    <p class = "date_du_cours">{{cours.Date}}</p> 
                    <p class="jour No_visible">{{ cours.jour }}</p>
                    <p class="id_cours No_visible">{{ cours.id }}</p>
                    <!-- Il ne doivent pas etre visible.Mais leurs precense me permet de recuperer
                    certain precision tel que l'id pour modifier le cours dans la base de donné et afficher le jours dans le 
                  formulaire de modification 'G.Ronald"-->
                  
                    <p class="groupe-color"> <span class="groupe">{{ cours.groupe }}</span> <span class="salle">{{ cours.salle }}</span></p>
                    <p > <span class="heure_debut">{{ cours.heure_debut }}</span>/<span class="heure_fin">{{ cours.heure_fin }}</span> <span class="matiere">{{cours.matiere}}</span></p>
                    <p class="teacher">{{ cours.teacher }}</p>
                    <button class="edit-button modifier_btn" onclick="editRow(this)"> <a href="" class="show-form-link">Modifier </a></button>
                    <button class="delete_btn"><a href="{% url 'DeleteCours' cours.id %}">Suprimer</a></button>
                    
                  </div>
               
              {% endif %}
            {% empty %}
              <p>Aucun cours programmé</p>
            {% endfor %}
              </td>
                <!-- Répétez le même modèle pour les autres jours de la semaine -->
              </tr>
            </table>

            
            

        </section>

              <!-- Il faut passer les autres jour ici -->
             

          <!-- <section class="cal">
            <tr class="tab-cont">
            <td><td>Donnée</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr> -->
        

       <!--   <table>
         <tr class="week-days">
            <th>Lundi</th>
            <th>Mardi</th>
            <th>Mercredi</th>
            <th>Jeudi</th>
            <th>Vendredi</th>
            <th>Samedi</th>
          </tr>
          <tr class="tab-cont">
            <td>
              {% for cours in cours_programmes %}
                {% if cours.jour == "Lundi" %} -->
                  <!-- Afficher les informations du cours -->
                  <!-- {{ cours.matiere }} - {{ cours.heure_debut }} à {{ cours.heure_fin }}<br>
                {% endif %}
              {% empty %}
                Aucun cours programmé
              {% endfor %}
            </td>
            <td>
              {% for cours in cours_programmes %}
                {% if cours.jour == "Mardi" %} -->
                  <!-- Afficher les informations du cours -->
                  <!-- {{ cours.matiere }} - {{ cours.heure_debut }} à {{ cours.heure_fin }}<br>
                {% endif %}
              {% empty %}
                Aucun cours programmé
              {% endfor %}
            </td> -->
            <!-- Répétez le même modèle pour les autres jours de la semaine -->
          <!-- </tr>
        </table>
         -->
        
        
        <!-- <div class="content">
          <form method="get" action="">
              <label for="Lundi">Lundi 
                
              </label>
              <input type="text" name="Lundi" id="Lundi" maxlength="10" required>
          </form>
        </div> -->
        <script>
          function editRow(button) {
            var row = button.parentNode;
            var day= row.querySelector('.jour').textContent;
            var cours_id= row.querySelector('.id_cours').textContent;
            var groupe = row.querySelector('.groupe').textContent;
            var salle = row.querySelector('.salle').textContent;
            var heure_debut = row.querySelector('.heure_debut').textContent;
            var heure_fin = row.querySelector('.heure_fin').textContent;
            var matiere = row.querySelector('.matiere').textContent;
            var teacher = row.querySelector('.teacher').textContent;
           
            
            document.getElementById('Modif_start-time').value = heure_debut;
            document.getElementById('Modif_end-time').value = heure_fin;
            document.getElementById('Modif_matiere').value = matiere;
            document.getElementById('Modif_teacher').value = teacher;
            document.getElementById('Modif_groupe').value = groupe;
            document.getElementById('Modif_salle').value = salle;
            document.getElementById('Modif_day').value = day;
            document.getElementById('Modif_cours_id').value=cours_id;
        
            var formContainer = document.getElementById('conteneur-formulaire');
            formContainer.style.display = 'block';
          }
        
          document.addEventListener('click', function(event) {
            var showFormLink = event.target.closest('.show-form-link');
            if (showFormLink) {
              event.preventDefault();
              editRow(showFormLink.querySelector('.edit-button'));
            }
          });
        
          document.addEventListener('change', function(event) {
            var closeCheckbox = event.target.closest('.close-checkbox-modify');
            if (closeCheckbox) {
              var formContainer = document.getElementById('conteneur-formulaire');
              formContainer.style.display = 'none';
            }
          });
        </script>
      </section> 
      </main>
  </body>
</html>